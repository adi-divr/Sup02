(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[186],{1217:(e,t,s)=>{Promise.resolve().then(s.bind(s,3208))},3208:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>i});var a=s(5155),r=s(2115),n=s(5565),o=s(6046),l=s(1760);s(7963);let c=()=>{var e;let[t,s]=(0,r.useState)([]),[c,i]=(0,r.useState)(""),d=(0,o.useSearchParams)(),A=null==d?void 0:d.get("slot");(0,r.useEffect)(()=>{(async()=>{if(!A){console.error("No slot parameter provided"),i("Slot parameter is missing.");return}try{let e=await fetch("/api/GetAll?slotKey=".concat(encodeURIComponent(A)));if(!e.ok)throw Error("Failed to fetch data: ".concat(e.statusText));let t=await e.json();console.log(t),s(t.data.slice(1).map(e=>({name:e[0]||"",weight:e[3]||"",age:e[4]||"",slot:e[5]||"",number:e[2]||"",date:e[7]||""})))}catch(e){console.error(e),e instanceof Error?i(e.message):i("An unexpected error occurred")}})()},[A]);let h=async()=>{if(!A||0===t.length){alert("Slot parameter or bookings are missing.");return}let e=t.map(e=>({name:e.name,number:e.number,bookingDate:e.date,slotID:A,paymentMade:(1500*t.length).toString()}));try{let t=await fetch("/api/Accepted",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)});if(!t.ok){let e=await t.json();alert(e.message);return}alert("Booking accepted and saved!")}catch(e){console.error("Error submitting data:",e),alert("Failed to submit booking data. Please try again.")}};return(0,a.jsxs)("div",{className:"confirmation-container",children:[(0,a.jsx)("header",{className:"confirmation-header",children:(0,a.jsx)(n.default,{src:l.A,alt:"SUP IN KOCHI Logo",className:"logo"})}),(0,a.jsxs)("main",{className:"confirmation-main",children:[(0,a.jsx)("h1",{className:"confirmation-title",children:"Confirmation Portal"}),(0,a.jsxs)("div",{className:"slot-info",children:[(0,a.jsxs)("span",{className:"total-slots",children:["Total Slots: ",(0,a.jsx)("strong",{children:t.length})]}),(0,a.jsx)("span",{className:"date",children:(null===(e=t[0])||void 0===e?void 0:e.date)||"N/A"})]}),(0,a.jsx)("div",{className:"slot-list",children:c?(0,a.jsx)("p",{className:"error",children:c}):t.map((e,t)=>(0,a.jsxs)("div",{className:"slot-card",children:[(0,a.jsxs)("p",{children:[(0,a.jsx)("strong",{children:"Name:"})," ",e.name]}),(0,a.jsxs)("p",{children:[(0,a.jsx)("strong",{children:"Weight:"})," ",(0,a.jsx)("span",{className:"weight ".concat("above 100"===e.weight?"red-text":"blue-text"),children:e.weight})]}),(0,a.jsxs)("p",{children:[(0,a.jsx)("strong",{children:"Age:"})," ",(0,a.jsx)("span",{className:"blue-text",children:e.age})]})]},t))}),(0,a.jsxs)("div",{className:"action-buttons",children:[(0,a.jsx)("button",{className:"accept-button",onClick:h,children:"Accept"}),(0,a.jsx)("button",{className:"reject-button",onClick:()=>{console.log("Reject clicked for slot:",A)},children:"Reject"})]})]})]})},i=()=>(0,a.jsxs)(r.Suspense,{children:[(0,a.jsx)(c,{}),";"]})},6046:(e,t,s)=>{"use strict";var a=s(6658);s.o(a,"useRouter")&&s.d(t,{useRouter:function(){return a.useRouter}}),s.o(a,"useSearchParams")&&s.d(t,{useSearchParams:function(){return a.useSearchParams}})},7963:()=>{},1760:(e,t,s)=>{"use strict";s.d(t,{A:()=>a});let a={src:"/<Sup02>/_next/static/media/logo.dbc2b4d9.png",height:99,width:115,blurDataURL:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAgAAAAHCAMAAAACh/xsAAAAG1BMVEVMaXEhGBL2eTrwdDoMDAwnGhL2Vzj/nT6XTSgH+lRRAAAACXRSTlMAJRtGTk11cx8rtz1lAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAIklEQVR4nGNgQAJMTFAGMzNUgI0dIsTIysoIYbCwQBgQAAAFpAAy6yQnpAAAAABJRU5ErkJggg==",blurWidth:8,blurHeight:7}}},e=>{var t=t=>e(e.s=t);e.O(0,[58,565,441,517,358],()=>t(1217)),_N_E=e.O()}]);